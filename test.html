<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Routes Map (Animated)</title>
  <style>
    :root{
      --bg:#0B1C2D;
      --panel:#0F1A28cc;
      --grid:#ffffff10;
      --land:#ffffff0d;
      --stroke:#ffffff55;
      --route:#E0218A;
      --routeGlow:#E0218A55;
      --text:#F4F4F4;
      --muted:#C0C4CC;
      --gold:#C8A85C;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: radial-gradient(1200px 600px at 30% 20%, #1a3a5d55, transparent 55%),
                  radial-gradient(900px 500px at 80% 60%, #2c0b3a55, transparent 60%),
                  var(--bg);
      color:var(--text);
    }
    .wrap{
      max-width: 1200px;
      margin: 0 auto;
      padding: 18px;
    }
    .card{
      border:1px solid #ffffff14;
      border-radius: 18px;
      background: linear-gradient(180deg, #0f1a28cc, #0f1a2899);
      backdrop-filter: blur(10px);
      box-shadow: 0 18px 50px #00000055;
      overflow:hidden;
    }
    .topbar{
      display:flex;
      gap:14px;
      align-items:center;
      justify-content:space-between;
      padding:14px 16px;
      border-bottom:1px solid #ffffff14;
    }
    .brand{
      display:flex; gap:12px; align-items:center;
      letter-spacing:.2px;
    }
    .dot{
      width:10px;height:10px;border-radius:50%;
      background: var(--route);
      box-shadow: 0 0 0 6px var(--routeGlow), 0 0 28px var(--routeGlow);
    }
    .title{
      font-weight:700;
      font-size:14px;
      text-transform:uppercase;
      color:var(--muted);
    }
    .controls{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
    }
    button{
      appearance:none;
      border:1px solid #ffffff20;
      background:#0b1624;
      color:var(--text);
      padding:9px 12px;
      border-radius: 12px;
      cursor:pointer;
      font-weight:600;
      font-size:12px;
      letter-spacing:.2px;
    }
    button.primary{
      border-color:#E0218A55;
      background: linear-gradient(180deg, #E0218A, #b9156e);
      box-shadow: 0 10px 26px #e0218a33;
    }
    button:hover{ filter:brightness(1.06); }
    .legend{
      display:flex;
      gap:14px;
      align-items:center;
      padding: 10px 16px;
      border-top: 1px solid #ffffff14;
      color: var(--muted);
      font-size: 12px;
    }
    .pill{
      display:inline-flex; gap:8px; align-items:center;
      padding:6px 10px;
      border:1px solid #ffffff18;
      border-radius:999px;
      background:#0b1624aa;
    }
    .swatch{
      width:10px;height:10px;border-radius:3px;
      background:var(--route);
      box-shadow:0 0 18px var(--routeGlow);
    }
    .swatch2{
      width:10px;height:10px;border-radius:3px;
      background:var(--gold);
      box-shadow:0 0 18px #c8a85c33;
    }

    /* SVG */
    .stage{
      position:relative;
      width:100%;
      aspect-ratio: 16 / 8;
      min-height: 420px;
      background:
        linear-gradient(transparent 95%, var(--grid) 95%),
        linear-gradient(90deg, transparent 95%, var(--grid) 95%),
        radial-gradient(800px 420px at 40% 20%, #ffffff10, transparent 60%),
        radial-gradient(700px 380px at 80% 60%, #e0218a10, transparent 65%);
      background-size: 60px 60px, 60px 60px, auto, auto;
    }
    svg{
      width:100%;
      height:100%;
      display:block;
    }
    .land{
      fill: var(--land);
      stroke: #ffffff14;
      stroke-width: 1.2;
    }
    .route{
      fill:none;
      stroke: var(--route);
      stroke-width: 2.4;
      stroke-linecap: round;
      filter: drop-shadow(0 0 8px var(--routeGlow));
      stroke-dasharray: 6 10;
      animation: dash 1.1s linear infinite;
      opacity:.92;
    }
    @keyframes dash{
      to{ stroke-dashoffset: -16; }
    }
    .route.draw{
      stroke-dasharray: var(--len) var(--len);
      stroke-dashoffset: var(--len);
      animation: draw 1.6s cubic-bezier(.2,.9,.2,1) forwards, dash 1.1s linear infinite;
    }
    @keyframes draw{
      to{ stroke-dashoffset: 0; }
    }
    .route.secondary{
      stroke: #ffffff55;
      filter: drop-shadow(0 0 6px #ffffff22);
      opacity:.6;
    }
    .pin{
      fill: #0b1624;
      stroke: #ffffff33;
      stroke-width: 1.2;
    }
    .pin.core{
      fill: var(--route);
      stroke: #ffffffaa;
      stroke-width: 1.4;
      filter: drop-shadow(0 0 10px var(--routeGlow));
    }
    .label{
      font-size: 12px;
      fill: var(--text);
      paint-order: stroke;
      stroke: #000000aa;
      stroke-width: 3px;
      stroke-linejoin: round;
      opacity:.95;
      letter-spacing:.2px;
    }
    .pulse{
      fill: none;
      stroke: var(--route);
      stroke-width: 2;
      opacity: .55;
      transform-origin: center;
      animation: pulse 1.8s ease-out infinite;
      filter: drop-shadow(0 0 14px var(--routeGlow));
    }
    @keyframes pulse{
      0%{ transform: scale(.2); opacity:.75; }
      70%{ opacity:.12; }
      100%{ transform: scale(2.4); opacity:0; }
    }
    .plane{
      fill: var(--gold);
      filter: drop-shadow(0 0 10px #c8a85c55);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="topbar">
        <div class="brand">
          <div class="dot"></div>
          <div>
            <div class="title">Routes Map</div>
            <div style="font-weight:800; font-size:14px;">UK â†’ Europe & Iran</div>
          </div>
        </div>
        <div class="controls">
          <button id="btnPlay" class="primary">Play</button>
          <button id="btnPause">Pause</button>
          <button id="btnReset">Reset</button>
          <button id="btnToggleLabels">Toggle Labels</button>
        </div>
      </div>

      <div class="stage">
        <svg id="map" viewBox="0 0 1200 600" role="img" aria-label="Animated routes map">
          <!-- schematic "land" blobs (simple, no external assets) -->
          <path class="land" d="M118 396c52-98 168-148 278-148 78 0 153 21 214 45 60 24 98 35 157 32 59-3 90-30 144-40 52-10 111-1 174 19 64 20 121 41 169 37 44-4 61-22 76-42 15-20 19-42 19-65 0-29-10-61-38-90-27-28-70-49-118-60-50-11-104-13-156-8-53 6-93 21-141 35-48 14-105 26-172 18-67-8-130-39-204-52-76-14-161-7-222 21-62 28-99 76-118 123-18 46-18 88-4 124 13 36 40 67 62 91z"/>
          <path class="land" d="M764 358c27-33 66-56 110-66 44-9 94-5 135 6 41 11 73 30 93 52 20 22 28 48 20 72-8 25-31 45-62 57-31 12-69 16-112 12-43-4-87-18-121-31-34-13-57-25-63-43-6-17 6-39 0-59z"/>

          <!-- groups -->
          <g id="routes"></g>
          <g id="pins"></g>
          <g id="planes"></g>
        </svg>
      </div>

      <div class="legend">
        <span class="pill"><span class="swatch"></span> Active route</span>
        <span class="pill"><span class="swatch2"></span> Aircraft marker</span>
        <span class="pill" style="margin-left:auto;">Edit routes list in JS: <code style="color:#fff; opacity:.85;">routes[]</code></span>
      </div>
    </div>
  </div>

  <script>
    // --- Simple schematic coordinate system (SVG viewBox 1200x600)
    // Adjust these positions to match your branding / preferred map framing.
    const locations = {
      "London (UK)":   { x: 250, y: 210, core:true },
      "Paris":         { x: 310, y: 260 },
      "Madrid":        { x: 250, y: 360 },
      "Rome":          { x: 430, y: 340 },
      "Berlin":        { x: 420, y: 240 },
      "Vienna":        { x: 470, y: 270 },
      "Zurich":        { x: 390, y: 290 },
      "Athens":        { x: 520, y: 420 },
      "Istanbul":      { x: 600, y: 360 },
      "Tehran (Iran)": { x: 900, y: 360, core:true }
    };

    // --- Your route list (edit freely)
    // Suggestion: keep routes from your UK base to key European hubs + Tehran.
    const routes = [
      { from: "London (UK)", to: "Paris" },
      { from: "London (UK)", to: "Zurich" },
      { from: "London (UK)", to: "Rome" },
      { from: "London (UK)", to: "Istanbul" },
      { from: "London (UK)", to: "Tehran (Iran)" }
    ];

    const svg = document.getElementById("map");
    const gRoutes = document.getElementById("routes");
    const gPins = document.getElementById("pins");
    const gPlanes = document.getElementById("planes");

    let showLabels = true;
    let playing = false;
    let raf = null;

    // Create pins + labels
    function drawPins() {
      gPins.innerHTML = "";
      Object.entries(locations).forEach(([name, p]) => {
        const pin = document.createElementNS("http://www.w3.org/2000/svg","circle");
        pin.setAttribute("cx", p.x);
        pin.setAttribute("cy", p.y);
        pin.setAttribute("r", p.core ? 6.2 : 5.2);
        pin.setAttribute("class", p.core ? "pin core" : "pin");
        gPins.appendChild(pin);

        if (p.core) {
          const pulse = document.createElementNS("http://www.w3.org/2000/svg","circle");
          pulse.setAttribute("cx", p.x);
          pulse.setAttribute("cy", p.y);
          pulse.setAttribute("r", 10);
          pulse.setAttribute("class", "pulse");
          gPins.appendChild(pulse);
        }

        const label = document.createElementNS("http://www.w3.org/2000/svg","text");
        label.textContent = name;
        label.setAttribute("x", p.x + 10);
        label.setAttribute("y", p.y - 10);
        label.setAttribute("class", "label");
        label.dataset.label = "1";
        gPins.appendChild(label);
      });
    }

    // Quadratic Bezier curve between points for a nice "flight arc"
    function curvedPath(a, b) {
      const dx = b.x - a.x;
      const dy = b.y - a.y;
      const mx = (a.x + b.x) / 2;
      const my = (a.y + b.y) / 2;

      // Curve strength: tweak 0.22..0.40
      const k = 0.28;
      // Perpendicular offset for control point
      const cx = mx - dy * k;
      const cy = my + dx * k;

      return `M ${a.x} ${a.y} Q ${cx} ${cy} ${b.x} ${b.y}`;
    }

    // Draw routes (with "draw" animation)
    function drawRoutes() {
      gRoutes.innerHTML = "";
      routes.forEach((r, idx) => {
        const a = locations[r.from];
        const b = locations[r.to];
        if (!a || !b) return;

        const path = document.createElementNS("http://www.w3.org/2000/svg","path");
        path.setAttribute("d", curvedPath(a,b));
        path.setAttribute("class", "route draw");
        path.style.animationDelay = `${idx * 0.18}s`;

        // After appended, compute length for draw animation
        gRoutes.appendChild(path);
        const len = path.getTotalLength();
        path.style.setProperty("--len", len.toFixed(2));
      });
    }

    // Plane icon (tiny) that travels along a selected route
    function planePathIcon() {
      // simple paper-plane shape
      return "M0,-7 L18,0 L0,7 L4,0 Z";
    }

    let plane = null;
    let planeRouteIndex = 0;
    let t = 0; // 0..1 along the route
    let speed = 0.0026; // travel speed

    function resetPlane() {
      gPlanes.innerHTML = "";
      plane = document.createElementNS("http://www.w3.org/2000/svg","path");
      plane.setAttribute("d", planePathIcon());
      plane.setAttribute("class","plane");
      gPlanes.appendChild(plane);
      planeRouteIndex = 0;
      t = 0;
    }

    function getRoutePathEl(idx) {
      return gRoutes.querySelectorAll("path")[idx] || null;
    }

    function step() {
      if (!playing) return;

      const pathEl = getRoutePathEl(planeRouteIndex);
      if (!pathEl) { playing = false; return; }

      const len = pathEl.getTotalLength();
      const p = pathEl.getPointAtLength(t * len);

      // rotate along tangent
      const p2 = pathEl.getPointAtLength(Math.min((t * len) + 2, len));
      const angle = Math.atan2(p2.y - p.y, p2.x - p.x) * 180 / Math.PI;

      plane.setAttribute("transform", `translate(${p.x} ${p.y}) rotate(${angle})`);

      t += speed;

      if (t >= 1) {
        t = 0;
        planeRouteIndex = (planeRouteIndex + 1) % routes.length;
      }

      raf = requestAnimationFrame(step);
    }

    function play() {
      if (playing) return;
      playing = true;
      raf = requestAnimationFrame(step);
    }
    function pause() {
      playing = false;
      if (raf) cancelAnimationFrame(raf);
      raf = null;
    }
    function resetAll() {
      pause();
      drawPins();
      drawRoutes();
      resetPlane();
    }

    // UI
    document.getElementById("btnPlay").addEventListener("click", play);
    document.getElementById("btnPause").addEventListener("click", pause);
    document.getElementById("btnReset").addEventListener("click", resetAll);
    document.getElementById("btnToggleLabels").addEventListener("click", () => {
      showLabels = !showLabels;
      [...gPins.querySelectorAll("[data-label]")].forEach(el => {
        el.style.display = showLabels ? "block" : "none";
      });
    });

    // Init
    resetAll();
    play();

    // OPTIONAL: expose helpers for quick editing in console
    window.__routesMap = { locations, routes, resetAll };
  </script>
</body>
</html>